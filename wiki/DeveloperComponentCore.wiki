#summary Developers' Guide - Component - Core
#labels Phase-Implementation
#sidebar DeveloperGuideSidebar

<wiki:toc max_depth="4">

= Overview =
The *Core* component provides the main functionality of the system and provides a interface for the *User Interface* component to interact with the system.

= Classes =

== !SystemLogicLayer == 

The main class that provides the implementation for the `IUIControllerInterface`. It provides most of the functionality that is required and delegates most of the specific jobs to the respective components.

== !PathTable == 

The table is in charge of keeping a history of seamless Sync Requests, to reduce the number of unnecessary requests sent to the `CompareAndSyncController` (see below).

== !LogicQueueObserver == 

The observer for the `SystemLogicNotificationQueue`. Process the notification and inform the System Logic Layer about the notification received.

== !SaveLoadHelper == 

The helper is in charge of saving the profiling data and tagging data to the various locations (see below).

= Explanation of Algorithms/Implementation =

== !PathTable ==

The main reason for the implementation of the path table is due to how `FileSystemWatcher` works and how our seamless works.

Take 3 Folders for example , Folder A , B and C.

If a new file is added to Folder A , the following events will be generated
Folder A(new) -> Folder B
Folder A(new) -> Folder C

Due to how `FileSystemWatcher` works, after the file is copied, Folder B will also detect a change and at almost the same time , Folder C will also detect a change.

The changes detected in the 2 folders may not come in any particular order.

The following events need to be filtered away :
Folder B(New) -> Folder A
Folder B(New) -> Folder C
Folder C(New) -> Folder A
Folder C(New) -> Folder B

Therefore, when an event is detected, all possible expected events need to be added to the path table and when the events occur, the events will be removed from the path table and `CompareAndSyncController` will not be informed of the events.

This greatly reduces the number of events `CompareAndSyncController` receives.

However, this also brings in a number of issues. One of which is when a series of events happens too fast, some of the entries in the path table may not be cleared. To clear the path table, we will clear the path table after a certain time of inactivity.

== !SaveLoadHelper ==

Saves the data into different locations. The locations to save to include the following :
 #  The Directory containing the executable.
 #  All local drives if the local drive contains a GUID attached to it.
 #  All external drives if the drive contains a GUID attached to it.